# 5. マルチテナント設計（UIカスタマイズ構成）

## 5.1 概要

本システムは、複数の事業所・企業（以下「テナント」）が同一のアプリケーションを利用しつつ、**入力画面やラベル文言をテナント単位でカスタマイズ可能**な構成を採用する。

画面上の各コンポーネントは「共通スキーマ」を持ち、UIの種類（CheckBox／ComboBox／TextBox など）、表示／非表示、ラベル名などをテナント別に切り替えられる。

本章では、**画面上でどのようにマルチテナント構成を反映しているか**を示す。データ管理やAPI実装の詳細は、**別途「データ設計書」**にて定義する。

## **5.2 構成イメージ**

```tex
[共通アプリケーション層]
      └── ComponentLabelMaster（テナント別UI設定）
             ├─ tenant_id: T001（A社）
             │   ├─ 工事種別：ComboBox（必須）
             │   ├─ 工程種別：CheckBox（任意）
             │   ├─ 注意機材：CheckBox（任意）
             │   └─ 現場状況：ComboBox（任意）
             └─ tenant_id: T002（B社）
                 ├─ 工事種別：ComboBox（必須）
                 ├─ 工程種別：非表示
                 ├─ 注意機材：ComboBox（必須）
                 └─ 現場状況：非表示

```

## **5.3 画面上の反映ルール**

| 項目           | 説明                                                         |
| -------------- | ------------------------------------------------------------ |
| **ラベル名称** | ComponentLabelMasterで定義された文言に置き換え（例：「工事種別」→「作業分類」） |
| **UIタイプ**   | 定義内容に応じて表示コンポーネントを切り替え（CheckBox／ComboBox／TextBox） |
| **必須制御**   | is_required が true の場合、「*」を表示し、未入力時にバリデーション実行 |
| **表示制御**   | is_enabled が false の場合、該当コンポーネントを非表示       |
| **並び順**     | order_index 順に上から表示                                   |
| **自由入力欄** | 最大10項目まで追加可能。使用しない場合は NULL として非表示   |

## **5.4 UI反映のタイミング**

| タイミング     | 説明                                                     |
| -------------- | -------------------------------------------------------- |
| **ログイン時** | テナントIDを基にUI設定情報を取得し、フロントでキャッシュ |
| **初期描画時** | キャッシュ内容をもとに入力画面の構成を動的生成           |
| **設定更新時** | 管理者がUI構成を変更した場合、再取得または再描画を実行   |

## **5.5 管理対象**

| 管理単位         | 管理対象                                 | 備考                         |
| ---------------- | ---------------------------------------- | ---------------------------- |
| **テナント単位** | 表示項目、ラベル名称、UIタイプ、必須制御 | ComponentLabelMasterで管理   |
| **共通設定**     | システム全体で共通するUI構造             | 共通UIテンプレートで制御     |
| **自由項目**     | 最大10個の追加TextBox                    | 使用有無をテナントごとに設定 |

## **5.6 備考**

- 本章で示すUI構成制御は **画面設計の範囲** に限定する。
- 各マスターのデータ構造、キー定義、API通信仕様については、別途「**データ設計書（5章以降）**」および「**API仕様書（6章）**」で詳細を定義する。
- 本画面設計では、UIの共通スキーマを前提とし、**表示や文言のみをテナント単位で制御**する。