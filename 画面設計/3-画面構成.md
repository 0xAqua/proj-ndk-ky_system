# 3. 画面構成

本章では、「危険予知システム」を構成する主要画面の概要および各画面の主なUI要素を定義する。

本システムは、ログインから危険予知結果表示までを一連の操作フローとして設計しており、ユーザーが入力した工事情報に基づいてRAG（Retrieval-Augmented Generation）による危険予知結果を提示する。

## 3.1. 画面一覧

以下に、本システムで使用される画面の一覧を示す。

| No   | 画面グループ | 画面ID  | 画面名称       | 概要                                                       |
| ---- | ------------ | ------- | -------------- | ---------------------------------------------------------- |
| 1    | 000          | V000010 | ログイン       | ユーザーIDおよびパスワードによる認証を行う。               |
| 2    | 000          | V000020 | OTP認証        | ログイン時の二要素認証（ワンタイムパスワード）を実施する。 |
| 3    | 000          | V000030 | パスワード変更 | ログイン済みユーザーがパスワードを変更する。               |
| 4    | 010          | V000040 | 入力画面       | 工事内容や作業条件を入力し、危険予知処理を実行する。       |
| 5    | 020          | V000050 | 出力画面       | 危険予知結果および安全対策案を表示する。                   |

<p style="text-align: center;"><strong>表 3-1 危険予知システム画面一覧</strong></p>

## 3.2. 画面遷移構成

システム全体の画面遷移は以下のとおりである。

## 3.3. 各画面の構成要素

| 画面ID  | 画面名称       | 主な構成要素                                                 | 概要                                                         |
| ------- | -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| V000010 | ログイン       | ユーザーID入力欄、パスワード入力欄、ログインボタン、パスワード忘れリンク | ユーザー認証を行い、成功時にOTP認証画面へ遷移する。          |
| V000020 | OTP認証        | OTP入力欄、再送信ボタン、送信ボタン                          | 送信ボタン押下時にワンタイムパスワードを検証し、成功時は入力画面へ遷移する。 |
| V000030 | パスワード変更 | 現在のパスワード、新パスワード、確認用パスワード、変更ボタン | パスワード変更APIを呼び出し、正常完了時に完了メッセージを表示する。 |
| V000040 | 入力画面       | 工事区分、作業場所、使用機材、作業手順、送信ボタン           | 入力情報をRAGに送信し、危険要因と対策を取得する。            |
| V000050 | 出力画面       | 危険要因リスト、安全対策提案、再入力ボタン                   | RAG結果を一覧表示し、再入力を可能とする。                    |

<p style="text-align: center;"><strong>表 3-2 各画面の構成要素一覧</strong></p>

## 3.4. デザインおよびレイアウト方針

- フロントエンドは **React（TypeScript）＋Chakra UI** により構築。
- 各画面は共通レイアウト（ヘッダー／フッター／メインコンテンツ）を継承する。
- 各入力フォームはレスポンシブデザインに対応し、タブレット・PC両方での操作性を確保する。
- ボタン操作時は、通信中を示す **スピナー（ロード中アニメーション）** を表示し、処理完了後に次画面へ遷移する。
- ラベルやフォーム構成は、**`ComponentLabelMaster`** に基づきテナントごとに動的生成される（詳細は別途資料:第5章参照）。

## 3.5. エラーハンドリング方針

- バリデーションエラーは入力欄下部に赤字でメッセージを表示。
- 認証や通信エラーなど致命的エラーは 項目ラベルの下に表示。
- サーバー側から返却されるエラーコードを受け取り、対応するユーザーフレンドリーメッセージを表示。